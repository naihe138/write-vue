{"version":3,"file":"vue.js","sources":["../src/observer/array.js","../src/utils/index.js","../src/observer/dep.js","../src/observer/index.js","../src/utils/nextTick.js","../src/scheduler.js","../src/observer/watcher.js","../src/state.js","../src/compile/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/utils/mergeOptions.js","../src/init.js","../src/vdom/create-element.js","../src/render.js","../src/globalAPI.js","../src/index.js"],"sourcesContent":["let oldArrayProtoMethods = Array.prototype\n\nexport let arrayMethods = Object.create(oldArrayProtoMethods)\n\nlet methods = ['push', 'pop', 'shift', 'unshift', 'reverse', 'sort', 'splice']\n// 数组方法拦截\nmethods.forEach(method => {\n  arrayMethods[method] = function (...args) {\n    const result = oldArrayProtoMethods[method].apply(this, args);\n    const ob = this.__ob__;\n    let inserted = null;\n    switch(method) {\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break\n      default: \n        break\n    }\n    if (inserted) {\n      ob.observeArray(inserted)\n    }\n    ob.dep.notify()\n    return result\n  }\n})","\nexport const emptyObject = Object.freeze({})\n\nexport function isUndef (v) {\n  return v === undefined || v === null\n}\n\nexport function isDef (v) {\n  return v !== undefined && v !== null\n}\n\nexport function isTrue (v) {\n  return v === true\n}\n\nexport function isFalse (v) {\n  return v === false\n}\n\n/**\n * 是否是原始类型.\n */\nexport function isPrimitive (value) {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    // $flow-disable-line\n    typeof value === 'symbol' ||\n    typeof value === 'boolean'\n  )\n}\n\nexport function isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n\nconst _toString = Object.prototype.toString\n\nexport function toRawType (value){\n  return _toString.call(value).slice(8, -1)\n}\n\nexport function isPlainObject (obj){\n  return _toString.call(obj) === '[object Object]'\n}\n\nexport function isRegExp (v){\n  return _toString.call(v) === '[object RegExp]'\n}\n\nexport function isValidArrayIndex (val){\n  const n = parseFloat(String(val))\n  return n >= 0 && Math.floor(n) === n && isFinite(val)\n}\n\nexport function isPromise (val){\n  return (\n    isDef(val) &&\n    typeof val.then === 'function' &&\n    typeof val.catch === 'function'\n  )\n}\n\nexport function toString (val){\n  return val == null\n    ? ''\n    : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n      ? JSON.stringify(val, null, 2)\n      : String(val)\n}\n\nexport function toNumber (val) {\n  const n = parseFloat(val)\n  return isNaN(n) ? val : n\n}\n\n\nexport function makeMap (\n  str,\n  expectsLowerCase\n){\n  const map = Object.create(null)\n  const list = str.split(',')\n  for (let i = 0; i < list.length; i++) {\n    map[list[i]] = true\n  }\n  return expectsLowerCase\n    ? val => map[val.toLowerCase()]\n    : val => map[val]\n}\n\n/**\n * Check if a tag is a built-in tag.\n */\nexport const isBuiltInTag = makeMap('slot,component', true)\n\n/**\n * Check if an attribute is a reserved attribute.\n */\nexport const isReservedAttribute = makeMap('key,ref,slot,slot-scope,is')\n\n/**\n * Remove an item from an array.\n */\nexport function remove (arr, item) {\n  if (arr.length) {\n    const index = arr.indexOf(item)\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\n/**\n * Check whether an object has the property.\n */\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport function hasOwn (obj, key){\n  return hasOwnProperty.call(obj, key)\n}\n\n/**\n * Create a cached version of a pure function.\n */\nexport function cached (fn) {\n  const cache = Object.create(null)\n  return (function cachedFn (str) {\n    const hit = cache[str]\n    return hit || (cache[str] = fn(str))\n  })\n}\n\n/**\n * Camelize a hyphen-delimited string.\n */\nconst camelizeRE = /-(\\w)/g\nexport const camelize = cached((str)=> {\n  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : '')\n})\n\n/**\n * Capitalize a string.\n */\nexport const capitalize = cached((str)=> {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n})\n\n/**\n * Hyphenate a camelCase string.\n */\nconst hyphenateRE = /\\B([A-Z])/g\nexport const hyphenate = cached((str)=> {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n})\n\n/**\n * Simple bind polyfill for environments that do not support it,\n * e.g., PhantomJS 1.x. Technically, we don't need this anymore\n * since native bind is now performant enough in most browsers.\n * But removing it would mean breaking code that was able to run in\n * PhantomJS 1.x, so this must be kept for backward compatibility.\n */\n\n/* istanbul ignore next */\nfunction polyfillBind (fn, ctx) {\n  function boundFn (a) {\n    const l = arguments.length\n    return l\n      ? l > 1\n        ? fn.apply(ctx, arguments)\n        : fn.call(ctx, a)\n      : fn.call(ctx)\n  }\n\n  boundFn._length = fn.length\n  return boundFn\n}\n\nfunction nativeBind (fn, ctx) {\n  return fn.bind(ctx)\n}\n\nexport const bind = Function.prototype.bind\n  ? nativeBind\n  : polyfillBind\n\n/**\n * Convert an Array-like object to a real Array.\n */\nexport function toArray (list, start) {\n  start = start || 0\n  let i = list.length - start\n  const ret = new Array(i)\n  while (i--) {\n    ret[i] = list[i + start]\n  }\n  return ret\n}\n\n/**\n * Mix properties into target object.\n */\nexport function extend (to, _from) {\n  for (const key in _from) {\n    to[key] = _from[key]\n  }\n  return to\n}\n\n/**\n * Merge an Array of Objects into a single Object.\n */\nexport function toObject (arr) {\n  const res = {}\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i]) {\n      extend(res, arr[i])\n    }\n  }\n  return res\n}\n\n/* eslint-disable no-unused-vars */\n\n/**\n * Perform no operation.\n * Stubbing args to make Flow happy without leaving useless transpiled code\n * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/).\n */\nexport function noop () {}\n\n/**\n * Always return false.\n */\nexport const no = () => false\n\n/* eslint-enable no-unused-vars */\n\n/**\n * Return the same value.\n */\nexport const identity = (_) => _\n\n/**\n * Generate a string containing static keys from compiler modules.\n */\nexport function genStaticKeys (modules){\n  return modules.reduce((keys, m) => {\n    return keys.concat(m.staticKeys || [])\n  }, []).join(',')\n}\n\n/**\n * Check if two values are loosely equal - that is,\n * if they are plain objects, do they have the same shape?\n */\nexport function looseEqual (a, b){\n  if (a === b) return true\n  const isObjectA = isObject(a)\n  const isObjectB = isObject(b)\n  if (isObjectA && isObjectB) {\n    try {\n      const isArrayA = Array.isArray(a)\n      const isArrayB = Array.isArray(b)\n      if (isArrayA && isArrayB) {\n        return a.length === b.length && a.every((e, i) => {\n          return looseEqual(e, b[i])\n        })\n      } else if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime()\n      } else if (!isArrayA && !isArrayB) {\n        const keysA = Object.keys(a)\n        const keysB = Object.keys(b)\n        return keysA.length === keysB.length && keysA.every(key => {\n          return looseEqual(a[key], b[key])\n        })\n      } else {\n        /* istanbul ignore next */\n        return false\n      }\n    } catch (e) {\n      /* istanbul ignore next */\n      return false\n    }\n  } else if (!isObjectA && !isObjectB) {\n    return String(a) === String(b)\n  } else {\n    return false\n  }\n}\n\n/**\n * Return the first index at which a loosely equal value can be\n * found in the array (if value is a plain object, the array must\n * contain an object of the same shape), or -1 if it is not present.\n */\nexport function looseIndexOf (arr, val) {\n  for (let i = 0; i < arr.length; i++) {\n    if (looseEqual(arr[i], val)) return i\n  }\n  return -1\n}\n\n/**\n * Ensure a function is called only once.\n */\nexport function once (fn) {\n  let called = false\n  return function () {\n    if (!called) {\n      called = true\n      fn.apply(this, arguments)\n    }\n  }\n}\n\nexport function parsePath (path) {\n  const segments = path.split('.')\n  return function (obj) {\n    for (let i = 0; i < segments.length; i++) {\n      if (!obj) return\n      obj = obj[segments[i]]\n    }\n    return obj\n  }\n}\n","// 依赖收集\nlet id = 0\nclass Dep{\n  constructor() {\n    this.id = id++\n    this.subs = []\n  }\n  depend() {\n    if (Dep.target) {\n      Dep.target.addDep(this) // 让watcher,去存放dep\n    }\n  }\n  notify() {\n    // 触发更新\n    this.subs.forEach(watcher => watcher.update())\n  }\n  addSub(watcher) {\n    this.subs.push(watcher)\n  }\n}\n\nlet stack = []\n// push当前watcher到stack 中，并记录当前watcer\nexport function pushTarget(watcher) {\n  Dep.target = watcher\n  stack.push(watcher)\n}\n// 运行完之后清空当前的watcher\nexport function popTarget() {\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n}\n\nexport default Dep\n","import { arrayMethods } from './array'\nimport { hasOwn } from '../utils/index' \nimport Dep from './dep'\nclass Observer{\n  constructor(value) {\n    // 给每个响应式对象添加一个__ob__属性。方便数组拦截方法使用，和以后监听过了，就直接返回监听过的对象\n    Object.defineProperty(value, '__ob__', {\n      enumerable: false,\n      configurable: false,\n      value: this\n    })\n    this.dep = new Dep(); // 专门为数组设计的\n    if (Array.isArray(value)) {\n      // 拦截数组方法，这么做提升了很多性能\n      value.__proto__ = arrayMethods\n      // 给数组的每一个值设置监听\n      this.observeArray(value)\n    } else {\n      // 递归监听\n      this.walk(value)\n    }\n  }\n  walk(data) {\n    let keys = Object.keys(data);\n    for (let i = 0, len = keys.length; i < len; i++) {\n      let key = keys[i]\n      let value = data[key]\n      // 给对象设置get set\n      defineReactive(data, key, value)\n    }\n  }\n  observeArray(value) {\n    for (let i = 0, len = value.length; i < len; i++) {\n      observe(value[i])\n    }\n  }\n}\nfunction defineReactive(data, key, value) {\n  let childOb = observe(value);\n  let dep = new Dep()\n  Object.defineProperty(data, key, {\n    get() {\n      if (Dep.target) { // 如果取值时有watcher\n        dep.depend() // 让watcher保存dep，并且让dep 保存watcher\n        if(childOb){ \n          childOb.dep.depend(); // 收集数组依赖\n          if(Array.isArray(value)){ // 如果内部还是数组\n            dependArray(value);// 不停的进行依赖收集\n          }\n        }\n      }\n      return value\n    },\n    set(newValue) {\n      if (newValue == value) return\n      observe(newValue) // 监听新的值\n      value = newValue\n      dep.notify() // 通知渲染watcher去更新\n    }\n  })\n}\n// 数组的每一项进行收集\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    let current = value[i];\n    current.__ob__ && current.__ob__.dep.depend();\n    if (Array.isArray(current)) {\n      dependArray(current)\n    }\n  }\n}\n// 数据监听\nexport function observe(data) {\n  if (!(data !== null && typeof data === 'object')) {\n    return;\n  }\n  console.log(data)\n  // 如果被监听过就返回监听过的对象\n  if (hasOwn(data, '__ob__') && data.__ob__ instanceof Observer) {\n    return data.__ob__\n  } else {\n    return new Observer(data)\n  }\n}\n","let callbacks = []\nfunction flushCallback() {\n  callbacks.forEach(cb => cb())\n}\nlet timerFunc = () => {\n  Promise.resolve().then(flushCallback)\n}\nexport function nextTick(cb) {\n  callbacks.push(cb)\n  timerFunc()\n}\n","import { nextTick } from './utils/nextTick'\nlet has = {}\nlet queue = []\n// 调度\nfunction flushSchedulerQueue() {\n  for (let i = 0; i < queue.length; i++) {\n    queue[i].run()\n  }\n  queue = []\n  has = []\n}\n\nlet pending = false\n// 异步执行所有的watcher\nexport function queueWatcher(watcher) {\n  const id = watcher.id\n  if (!has[id]) {\n    has[id] = true\n    queue.push(watcher)\n    if (!pending) {\n      nextTick(flushSchedulerQueue)\n      pending = true\n    }\n  }\n}","import { pushTarget, popTarget } from './dep'\nimport { queueWatcher } from '../scheduler'\nimport { parsePath } from '../utils/index'\n\nlet id = 0;\n// 渲染watcher  computer user wather\nclass Watcher{\n  constructor(vm, exprOrFn, cb, options) {\n    this.vm = vm\n    this.exprOrFn = exprOrFn\n    if (typeof exprOrFn === 'function') {\n      this.getter = exprOrFn\n    } else {\n      this.getter = parsePath(exprOrFn) // user watcher \n    }\n    if (options) {\n      this.lazy = !!options.lazy // 为computed 设计的\n      this.user = !!options.user // 为user wather设计的\n    } else {\n      this.user = this.lazy = false\n    }\n    this.cb = cb\n    this.options = options\n    this.dirty = this.lazy\n    this.id = id++\n    this.deps = []\n    this.depsId = new Set() // dep 已经收集过相同的watcher 就不要重复收集了\n    this.value = this.lazy ? undefined : this.get()\n  }\n  addDep(dep) {\n    let id = dep.id\n    if (!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n      dep.addSub(this);\n    }\n  }\n  get() {\n    const vm = this.vm\n    pushTarget(this)\n    // 执行函数\n    let value = this.getter.call(vm, vm)\n    popTarget()\n    return value\n  }\n  update(){\n    if (this.lazy) {\n      this.dirty = true\n    } else {\n      queueWatcher(this)\n    }\n  }\n  run () {\n    const value = this.get()\n    const oldValue = this.value\n    this.value = value\n    // 执行cb\n    if (this.user) {\n      try{\n        this.cb.call(this.vm, value, oldValue)\n      } catch(error) {\n        console.error(error)\n      }\n    } else {\n      this.cb && this.cb.call(this.vm, oldValue, value)\n    }\n  }\n  // 执行get，并且 this.dirty = false\n  evaluate() {\n    this.value = this.get()\n    this.dirty = false\n  }\n  // 所有的属性收集当前的watcer\n  depend() {\n    let i = this.deps.length\n    while(i--) {\n      this.deps[i].depend()\n    }\n  }\n}\n\nexport default Watcher","import { observe } from './observer/index' \nimport { bind, noop, isPlainObject } from './utils/index'\nimport Watcher from './observer/watcher';\nimport Dep from './observer/dep';\n// 初始化所有配置\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm);\n  }\n  if (opts.methods) {\n    initMethod(vm);\n  }\n  if (opts.data) {\n    initData(vm);\n  }\n  if (opts.computed) {\n    initComputed(vm);\n  }\n  if (opts.watch) {\n    initWatch(vm);\n  }\n}\n\nfunction initProps(vm) {}\n\nfunction initMethod(vm) {\n  let methods = vm.$options.methods;\n  for (const key in methods) {\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm)\n  }\n}\n\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newValue) {\n      return vm[source][key] = newValue\n    }\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? data.call(vm, vm)\n    : data || {};\n  // 数据代理\n  let keys = Object.keys(data);\n  let i = keys.length;\n  while(i--) {\n    proxy(vm, '_data', keys[i]);\n  }\n  observe(data);\n}\n\nfunction initComputed(vm) {\n  const computed = vm.$options.computed\n  const watchers = vm._computedWatchers = Object.create(null)\n  for (const key in computed) {\n    const userDef = computed[key]\n    const getter = typeof userDef === 'function' ? userDef : userDef.get\n    watchers[key] = new Watcher(vm, getter, noop, { lazy: true })\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef)\n    }\n  }\n}\n\nconst sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n}\n\nfunction defineComputed(vm, key, userDef) {\n  if (typeof userDef === 'function') {\n    sharedPropertyDefinition.get = createComputedGetter(key)\n  } else {\n    sharedPropertyDefinition.get = userDef.get\n  }\n  Object.defineProperty(vm, key, sharedPropertyDefinition)\n}\n\nfunction createComputedGetter(key) {\n  return function computedGetter() {\n    const watcher = this._computedWatchers[key]\n    if (watcher) {\n      if (watcher.dirty) {// 给computed的属性添加订阅watchers\n        watcher.evaluate()\n      }\n      // 把渲染watcher 添加到属性的订阅里面去，这很关键\n      if (Dep.target) {\n        watcher.depend()\n      }\n      return watcher.value\n    }\n  }\n}\n\nfunction initWatch(vm) {\n  let watch = vm.$options.watch\n  for (let key in watch) {\n    const handler = watch[key]\n    createWatcher(vm, key, handler)\n  }\n}\n\nexport function createWatcher(vm, expOrFn, handler, options) {\n  if (isPlainObject(handler)) {\n    options = handler\n    handler = handler.handler\n  }\n  if (typeof handler === 'string') {\n    handler = vm[handler]\n  }\n  return vm.$watch(expOrFn, handler, options)\n}\n\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nconst ELEMENT_TYPE = 1\nconst TEXT_TYPE = 3\nlet root, currentParent, stack = []\n\nfunction createASTElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: ELEMENT_TYPE,\n    children: [],\n    attrs,\n    parent: null\n  }\n}\n// 开始< 符号处理\nfunction start(tagName, attrs) {\n  let element = createASTElement(tagName, attrs);\n  if (!root) {\n    root = element\n  }\n  currentParent = element\n  stack.push(element)\n}\n// 结束> 符号处理\nfunction end(tagName) {\n  let element = stack.pop()\n  currentParent = stack[stack.length - 1]\n  if (currentParent) {\n    element.parent = currentParent\n    currentParent.children.push(element)\n  }\n}\n// 空格和{{ }} 处理\nfunction chars(text) {\n  // text = text.replace(/\\s/g, '')\n  if (text && text.replace(/\\s/g, '')) {\n    currentParent.children.push({\n      type: TEXT_TYPE,\n      text\n    })\n  }\n}\n\nfunction parseHTML(html) {\n  while (html) {\n    let textEnd = html.indexOf('<')\n    if (textEnd === 0) {\n      const startTagMatch = parseStartTag()\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      const endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    let text\n    if (textEnd >= 0) {\n      text = html.substring(0, textEnd)\n    }\n    if (text) {\n      advance(text.length)\n      chars(text)\n    }\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length)\n      let attr, end\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        advance(attr[0].length);\n        match.attrs.push({ name: attr[1], value: attr[3] });\n      }\n      if (end) {\n        advance(end[0].length);\n        return match\n      }\n    }\n  }\n  // 截取字符串\n  function advance(n) {\n    html = html.substring(n)\n  }\n}\n\n// 生成代码\nfunction gen(node) {\n  if (node.type == 1) {\n    return generate(node);\n  } else {\n    let text = node.text\n    if (!defaultTagRE.test(text)) {\n      return `_v(${JSON.stringify(text)})`\n    }\n    let lastIndex = defaultTagRE.lastIndex = 0\n    let tokens = [];\n    let match, index;\n\n    while (match = defaultTagRE.exec(text)) {\n      index = match.index;\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      tokens.push(`_s(${match[1].trim()})`)\n      lastIndex = index + match[0].length;\n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)))\n    }\n    return `_v(${tokens.join('+')})`;\n  }\n}\n\nfunction getChildren(el) { // 生成儿子节点\n  const children = el.children;\n  if (children) {\n    return `${children.map(c => gen(c)).join(',')}`\n  } else {\n    return false;\n  }\n}\n\nfunction genProps(attrs) { // 生成属性\n  let str = '';\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === 'style') {\n      let obj = {}\n      attr.value.split(';').forEach(item => {\n        let [key, value] = item.split(':');\n        obj[key] = value;\n      })\n      attr.value = obj;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\nfunction generate(el) {\n  let children = getChildren(el);\n  let code = `_c('${el.tag}',${\n    el.attrs.length ? `${genProps(el.attrs)}` : 'undefined'\n    }${\n    children ? `,${children}` : ''\n    })`;\n  return code;\n}\n\nexport function compileToFunction(template) {\n  root = undefined\n  currentParent = undefined\n  stack = []\n  // 解析template\n  parseHTML(template)\n  // 从解析template成ast再生成code\n  let code = generate(root)\n  // 封装render函数\n  let render = `with(this){return ${code}}`;\n  let renderFn = new Function(render);\n  return renderFn\n}","\nexport function patch(oldVnode, newVnode) {\n  // 如果是第一次渲染\n  if (oldVnode.nodeType && oldVnode) {\n    const oldElm = oldVnode\n    const parentElm = oldElm.parentNode\n    let el = createElm(newVnode)\n    parentElm.insertBefore(el, oldElm.nextSibling)\n    parentElm.removeChild(oldVnode)\n    return el\n  } else if(oldVnode.tag !== newVnode.tag){  // 如果标签不一致说明是两个不同元素\n    oldVnode.el.parentNode.replaceChild(createElm(newVnode), oldVnode.el)\n  } else if (!oldVnode.tag) { // 如果标签一致但是不存在则是文本节点\n    if(oldVnode.text !== newVnode.text){\n    \toldVnode.el.textContent = newVnode.text;\n    }\n  } else {\n    let el = newVnode.el = oldVnode.el;\n    const oldChildren = oldVnode.children || []\n    const newChildren = newVnode.children || []\n    const oLen = oldChildren.length\n    const nLen = newChildren.length\n\n    updateProperties(newVnode, oldVnode.data);\n    // 新老都有儿子，则需要对比儿子\n    if (oLen > 0 && nLen > 0) {\n      updateChildrens(oldChildren, newChildren, el)\n    } else if (oLen > 0 && nLen === 0) { // 老的有儿子，新的没有儿子，则直接清空\n      el.innerHTML = ''\n    } else if (oLen === 0 && nLen > 0) { // 老得没有儿子，新的有儿子\n      const fragment = document.createDocumentFragment()\n      for (let i = 0; i < nLen; i++) {\n        fragment.appendChild(createElm(newChildren[i]))\n      }\n      el.appendChild(fragment)\n    }\n  }\n  return newVnode.el\n}\n\nfunction updateChildrens(oldChildren, newChildren, parent) {\n  let oldStartIndex = 0;\n  let oldStartVnode = oldChildren[0]\n  let oldEndIndex = oldChildren.length - 1\n  let oldEndVnode = oldChildren[oldEndIndex]\n\n  let newStartIndex = 0\n  let newStartVnode = newChildren[0]\n  let newEndIndex = newChildren.length - 1\n  let newEndVnode = newChildren[newEndIndex]\n\n  let map = makeIndexByKey(oldChildren)\n\n  while(oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n    if(!oldStartVnode){ // 在比对过程中，可能出现空值情况则直接跳过\n      oldStartVnode = oldChildren[++oldStartIndex];\n    }else if(!oldEndVnode){\n      oldEndVnode = oldChildren[--oldEndIndex]\n    } else if (isSameVnode(oldStartVnode, newStartVnode)) { // 优化向后追加逻辑\n      patch(oldStartVnode, newStartVnode)\n      oldStartVnode = oldChildren[++oldStartIndex]\n      newStartVnode = newChildren[++newStartIndex]\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) { // 优化向前追加逻辑\n      patch(oldEndVnode, newEndVnode)\n      oldEndVnode = oldChildren[--oldEndIndex]\n      newEndVnode = newChildren[--newEndIndex]\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) {\n      path(oldStartVnode, newEndVnode)\n      parent.insertBefore(oldStartVnode, oldEndVnode.el.nextSibling)\n      oldStartVnode = oldVnode[++oldStartIndex]\n      newEndVnode = newVnode[--newEndIndex]\n    } else if (isSameVnode(oldEndVnode, newStartVnode)){\n      path(oldEndVnode, newStartVnode)\n      parent.insertBefore(oldEndVnode.el, oldStartVnode.el)\n      oldEndVnode = oldVnode[--oldEndIndex]\n      newStartVnode = newVnode[++newStartIndex]\n    } else { // 暴力对比\n      let moveIndex = map[newStartVnode.key];\n      if (moveIndex == undefined) { // 老的中没有将新元素插入\n        parent.insertBefore(createElm(newStartVnode), oldStartVnode.el);\n      } else { // 有的话做移动操作\n        let moveVnode = oldChildren[moveIndex]; \n        oldChildren[moveIndex] = undefined;\n        parent.insertBefore(moveVnode.el, oldStartVnode.el);\n        patch(moveVnode, newStartVnode);\n      }\n      newStartVnode = newChildren[++newStartIndex]\n    }\n  }\n  // 如果有剩余则直接删除\n  if(oldStartIndex <= oldEndIndex){\n    for(let i = oldStartIndex; i<=oldEndIndex;i++){\n      let child = oldChildren[i];\n      if(child != undefined){\n        parent.removeChild(child.el)\n      }\n    }\n  }\n  // 如果有剩余的直接添加\n  if (newStartIndex <= newEndIndex) {\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\n      let ele = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1].el\n      parent.insertBefore(createElm(newChildren[i]), ele);\n    }\n  }\n}\n\n\nfunction isSameVnode(oldVnode, newVnode) {\n  return (oldVnode.tag === newVnode.tag) && (oldVnode.key === newVnode.key)\n}\n\nfunction makeIndexByKey(children) {\n  let map = {}\n  children.forEach((item, index) => {\n    map[item.key] = index\n  })\n  return map\n}\n\nexport function createElm(vnode) {\n  let { tag, children, key, data, text } = vnode\n  if(typeof tag === 'string') {\n    vnode.el = document.createElement(tag)\n    updateProperties(vnode)\n    children.forEach(child => {\n      return vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}\n\nfunction updateProperties(vnode, oldProps = {}) {\n  let newProps = vnode.data || {};\n  let el = vnode.el;\n  // 比对样式\n  let newStyle = newProps.style || {};\n  let oldStyle = oldProps.style || {};\n  for(let key in oldStyle){\n    if(!newStyle[key]){\n      el.style[key] = ''\n    }\n  }\n  // 删除多余属性\n  for(let key in oldProps){\n    if(!newProps[key]){\n      el.removeAttribute(key);\n    }\n  }\n  for (let key in newProps) {\n    if (key === 'style') {\n      for (let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName];\n      }\n    } else if (key === 'class') {\n      el.className = newProps.class;\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}","import Watcher from './observer/watcher';\nimport { patch } from './vdom/patch'\n// 更新操作\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function(vnode) {\n    const vm = this\n    const prevVnode = vm._vnode; // 保留上一次的vnode\n    vm._vnode = vnode;\n    if(!prevVnode){\n      // 需要用虚拟节点创建出真实节点 替换掉 真实的$el\n      // 我要通过虚拟节点 渲染出真实的dom     \n      vm.$el = patch(vm.$el, vnode);\n    }else{\n      vm.$el = patch(prevVnode, vnode); // 更新时做diff操作\n    }\n  }\n}\n// 挂载组件\nexport function mountComponent(vm, el) {\n  vm.$el = el\n  let updateComponent = () => {\n    vm._update(vm._render());\n  }\n  new Watcher(vm, updateComponent, () => {}, true)\n}\n// 调用生命周期函数\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook];\n  if (handlers) {\n    for (let i = 0; i < handlers.length; i++) {\n      handlers[i].call(vm);\n    }\n  }\n}\n","export const LIFECYCLE_HOOKS = [\n  'beforeCteate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed'\n]\nconst strate = {}\nfunction mergeHook(parentVal, childVal) {\n  if (childVal) {\n    if (parentVal) {\n      return parentVal.concat(childVal)\n    } else {\n      return [childVal]\n    }\n  } else {\n    return parentVal\n  }\n}\nLIFECYCLE_HOOKS.forEach(hook => {\n  strate[hook] = mergeHook\n})\n\nexport function mergeOptions(parent, child) {\n  const options = {}\n\n  for (let key in parent) {\n    mergeField(key)\n  }\n\n  for (let key in child) {\n    if (!parent.hasOwnProperty(key)) {\n      mergeField(key);\n    }\n  }\n\n  function mergeField(key) {\n    if (strate[key]) {\n      options[key] = strate[key](parent[key], child[key])\n    } else {\n      if (typeof parent[key] === 'object' && typeof child[key] === 'object') {\n        options[key] = {\n          ...parent[key],\n          ...child[key]\n        }\n      } else {\n        options[key] = child[key];\n      }\n    }\n  }\n  return options\n}","import { initState, createWatcher } from './state'\nimport { compileToFunction } from './compile/index'\nimport { mountComponent, callHook } from './lifecycle'\nimport { mergeOptions } from './utils/mergeOptions'\nimport { isPlainObject } from './utils/index'\nimport Watcher from './observer/watcher'\n\n// 初始化函数\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    // 合并全局对象到和配置对象到vm.$options中\n    vm.$options = mergeOptions(vm.constructor.options, options)\n    // 执行berforCreate 生命钩子函数\n    callHook(vm, 'berforCreate')\n    // 初始化数据\n    initState(vm)\n    // 执行created 生命钩子函数\n    callHook(vm, 'created')\n    if (vm.$options.el) {\n      // 执行beforeMount生命钩子函数\n      callHook(vm, 'beforeMount')\n      // 执行组件挂载\n      vm.$mount(vm.$options.el)\n      // 执行mounted生命钩子函数\n      callHook(vm, 'mounted')\n    }\n  }\n  // 挂载方法\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const options = vm.$options\n    el = document.querySelector(el);\n    if (!options.render) {\n      let template = options.template\n      if (!template && el) {\n        template = el.outerHTML\n      }\n      // 解析template成，返回renderh函数\n      const render = compileToFunction(template)\n      options.render = render\n    }\n    mountComponent(vm, el);\n  }\n  Vue.prototype.$watch = function (expOrFn, cb, options) {\n    const vm = this\n    if (isPlainObject(cb)) {\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {}\n    options.user = true\n    const watcher = new Watcher(vm, expOrFn, cb, options)\n    if (options.immediate) {\n      try {\n        cb.call(vm, watcher.value)\n      } catch(err) {\n        console.error('options.immediate error')\n      }\n    }\n  }\n}","export function createTextNode(text) {\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\nexport function createElement(tag, data = {}, ...children) {\n  let key = data.key\n  if (key) {\n    delete data.key\n  }\n  return vnode(tag, data, key, children)\n}\n\nfunction vnode(tag, data, key, children, text) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text\n  }\n}\n","import { createTextNode, createElement } from './vdom/create-element'\n\nexport function renderMixin(Vue) {\n  // 创建文本\n  Vue.prototype._v = function(text) {\n    return createTextNode(text)\n  }\n  // 创建元素\n  Vue.prototype._c = function () {\n    return createElement(...arguments)\n  }\n\n  // 拿到数据\n  Vue.prototype._s = function (val) {\n    return val == null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val);\n  }\n  // 挂载render函数\n  Vue.prototype._render = function() {\n    const vm = this\n    const { render } = this.$options\n    let vnode = render.call(vm)\n    return vnode\n  }\n}","import { mergeOptions } from './utils/mergeOptions'\n\nexport function initGlobalAPI(Vue) {\n  Vue.options = {}\n  Vue.mixin = function(mixin) {\n    this.options = mergeOptions(this.options, mixin)\n    return this\n  }\n}","import { initMixin } from './init';\nimport { lifecycleMixin } from './lifecycle';\nimport { renderMixin } from './render';\nimport { initGlobalAPI } from './globalAPI';\n\nfunction Vue(options) {\n  // 执行初始化函数，并把参数传递进去\n  this._init(options)\n}\n// 初始化全局api,和全局的koptions\ninitGlobalAPI(Vue)\n// 初始化Mixin\ninitMixin(Vue)\n// 初始化生命周期\nlifecycleMixin(Vue)\n// 初始化渲染方法\nrenderMixin(Vue)\n\nexport default Vue\n"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","apply","ob","__ob__","inserted","slice","observeArray","dep","notify","emptyObject","freeze","_toString","toString","isPlainObject","obj","call","makeMap","str","expectsLowerCase","map","list","split","i","length","val","toLowerCase","isBuiltInTag","isReservedAttribute","hasOwnProperty","hasOwn","key","polyfillBind","fn","ctx","boundFn","a","l","arguments","_length","nativeBind","bind","Function","noop","parsePath","path","segments","id","Dep","subs","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","Observer","value","defineProperty","enumerable","configurable","isArray","__proto__","walk","data","keys","len","defineReactive","observe","childOb","get","depend","dependArray","set","newValue","current","console","log","callbacks","flushCallback","cb","timerFunc","Promise","resolve","then","nextTick","has","queue","flushSchedulerQueue","run","pending","queueWatcher","Watcher","vm","exprOrFn","options","getter","lazy","user","dirty","deps","depsId","Set","undefined","add","addSub","oldValue","error","initState","opts","$options","props","initMethod","initData","computed","initComputed","watch","initWatch","proxy","source","_data","watchers","_computedWatchers","userDef","defineComputed","sharedPropertyDefinition","createComputedGetter","computedGetter","evaluate","handler","createWatcher","expOrFn","$watch","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","ELEMENT_TYPE","TEXT_TYPE","root","currentParent","createASTElement","tagName","attrs","tag","type","children","parent","start","element","end","chars","text","replace","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","attr","name","n","gen","node","generate","test","JSON","stringify","lastIndex","tokens","index","exec","trim","join","getChildren","el","c","genProps","item","code","compileToFunction","template","render","renderFn","patch","oldVnode","newVnode","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","replaceChild","textContent","oldChildren","newChildren","oLen","nLen","updateProperties","updateChildrens","innerHTML","fragment","document","createDocumentFragment","appendChild","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","makeIndexByKey","isSameVnode","moveIndex","moveVnode","child","ele","vnode","createElement","createTextNode","oldProps","newProps","newStyle","style","oldStyle","removeAttribute","styleName","className","setAttribute","lifecycleMixin","Vue","_update","prevVnode","_vnode","$el","mountComponent","updateComponent","_render","callHook","hook","handlers","LIFECYCLE_HOOKS","strate","mergeHook","parentVal","childVal","concat","mergeOptions","mergeField","initMixin","_init","constructor","$mount","querySelector","outerHTML","immediate","err","renderMixin","_v","_c","_s","initGlobalAPI","mixin"],"mappings":"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"}